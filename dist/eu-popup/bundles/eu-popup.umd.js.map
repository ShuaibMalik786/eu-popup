{"version":3,"file":"eu-popup.umd.js.map","sources":["ng://eu-popup/lib/eu-popup-insertion.directive.ts","ng://eu-popup/lib/dialog-ref.ts","ng://eu-popup/lib/dialog-config.ts","ng://eu-popup/lib/eu-popup.component.ts","ng://eu-popup/lib/poupInner/popupInner.component.ts","ng://eu-popup/lib/dialog-injector.ts","ng://eu-popup/lib/eu-popup.service.ts","ng://eu-popup/lib/eu-popup.module.ts"],"sourcesContent":["import {Directive, ViewContainerRef} from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[euPopupInsertion]',\r\n})\r\nexport class EuPopupInsertionDirective {\r\n  constructor(public viewContainerRef: ViewContainerRef) {\r\n  }\r\n}\r\n","import {Observable, Subject} from 'rxjs';\r\n\r\nexport class DialogRef {\r\n  constructor() {\r\n  }\r\n\r\n  private readonly _afterClosed = new Subject<any>();\r\n  afterClosed: Observable<any> = this._afterClosed.asObservable();\r\n\r\n  close(result?: any) {\r\n    this._afterClosed.next(result); \r\n  }\r\n}\r\n","export class DialogConfig {\r\n  type?: string;\r\n  title?: string;\r\n  text?: string;\r\n  showCancelButton?: boolean;\r\n  showOkButton?: boolean;\r\n  cancelButtonText?: string;\r\n  confirmButtonText?: string;\r\n  dismissOnClickOutside? = true;\r\n  confirmButtonBgColor?: string;\r\n  cancelButtonBgColor?: string;\r\n  cancelButtonTextColor?: string;\r\n  confirmButtonTextColor?: string;\r\n}\r\n","import {\r\n  Component,\r\n  Type,\r\n  OnDestroy,\r\n  AfterViewInit,\r\n  OnInit,\r\n  ComponentRef,\r\n  ViewChild,\r\n  ComponentFactoryResolver,\r\n  ChangeDetectorRef\r\n} from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { EuPopupInsertionDirective } from './eu-popup-insertion.directive';\r\nimport { DialogRef } from './dialog-ref';\r\nimport { DialogConfig } from './dialog-config';\r\n\r\n@Component({\r\n  selector: 'lib-eu-popup',\r\n  templateUrl: './eu-popup.component.html',\r\n  styleUrls: ['./eu-popup.component.scss']\r\n})\r\nexport class EuPopupComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  private readonly _onClose = new Subject<any>();\r\n\r\n  public componentRef: ComponentRef<any>;\r\n  public childComponentType: Type<any>;\r\n  public onClose = this._onClose.asObservable();\r\n\r\n  @ViewChild(EuPopupInsertionDirective, { read: false }) insertionPoint: EuPopupInsertionDirective;\r\n\r\n  constructor(\r\n    private componentFactoryResolver: ComponentFactoryResolver,\r\n    private cd: ChangeDetectorRef,\r\n    private dialogRef: DialogRef,\r\n    private dialogConfig: DialogConfig,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.loadChildComponent(this.childComponentType);\r\n    this.cd.detectChanges();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.componentRef) {\r\n      this.componentRef.destroy();\r\n    }\r\n  }\r\n\r\n  onOverlayClicked(evt: MouseEvent) {\r\n    if (this.dialogConfig.dismissOnClickOutside || this.dialogConfig.dismissOnClickOutside == undefined) {\r\n      this.dialogRef.close();\r\n    }\r\n  }\r\n\r\n  onDialogClicked(evt: MouseEvent) {\r\n    evt.stopPropagation();\r\n  }\r\n\r\n  loadChildComponent(componentType: Type<any>) {\r\n    let componentFactory = this.componentFactoryResolver.resolveComponentFactory(componentType);\r\n\r\n    let viewContainerRef = this.insertionPoint.viewContainerRef;\r\n    viewContainerRef.clear();\r\n\r\n    this.componentRef = viewContainerRef.createComponent(componentFactory);\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport {DialogConfig} from '../dialog-config';\r\nimport {DialogRef} from '../dialog-ref';\r\n\r\n@Component({\r\n  selector: 'lib-eu-popupinner',\r\n  templateUrl: './popupInner.component.html',\r\n  styleUrls: ['./popupInner.component.scss']\r\n})\r\nexport class EuPopupInnerComponent implements OnInit {\r\n  constructor(public config: DialogConfig, public dialog: DialogRef) {\r\n  }\r\n\r\n  onCancel() {\r\n    this.dialog.close(false);\r\n  }\r\n\r\n  onOk() {\r\n    this.dialog.close(true);\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n}\r\n","import { Injector, Type, InjectionToken, InjectFlags } from '@angular/core'\r\n\r\nexport class DialogInjector implements Injector {\r\n  constructor(\r\n    private _parentInjector: Injector,\r\n    private _additionalTokens: WeakMap<any, any>\r\n  ) {}\r\n\r\n  get<T>(\r\n    token: Type<T> | InjectionToken<T>,\r\n    notFoundValue?: T,\r\n    flags?: InjectFlags\r\n  ): T\r\n  get(token: any, notFoundValue?: any)\r\n  get(token: any, notFoundValue?: any, flags?: any) {\r\n    const value = this._additionalTokens.get(token)\r\n\r\n    if (value) return value\r\n\r\n    return this._parentInjector.get<any>(token, notFoundValue)\r\n  }\r\n}\r\n","import {\r\n  Injectable,\r\n  ComponentFactoryResolver,\r\n  ApplicationRef,\r\n  Injector,\r\n  EmbeddedViewRef,\r\n  ComponentRef, Type,\r\n} from '@angular/core';\r\nimport {EuPopupComponent} from './eu-popup.component';\r\nimport {EuPopupInnerComponent} from './poupInner/popupInner.component';\r\nimport {DialogConfig} from './dialog-config';\r\nimport {DialogInjector} from './dialog-injector';\r\nimport {DialogRef} from './dialog-ref';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n}) \r\nexport class EuPopupService {\r\n\r\n  dialogComponentRef: ComponentRef<EuPopupComponent>;\r\n\r\n  constructor(\r\n    private componentFactoryResolver: ComponentFactoryResolver,\r\n    private appRef: ApplicationRef,\r\n    private injector: Injector\r\n  ) {\r\n  }\r\n\r\n  private appendDialogComponentToBody(config: DialogConfig) {\r\n    const map = new WeakMap();\r\n    map.set(DialogConfig, config);\r\n\r\n    // add the DialogRef to dependency injection\r\n    const dialogRef = new DialogRef();\r\n    map.set(DialogRef, dialogRef);\r\n\r\n    // we want to know when somebody called the close mehtod\r\n    const sub = dialogRef.afterClosed.subscribe(() => {\r\n      // close the dialog\r\n      this.removeDialogComponentFromBody();\r\n      sub.unsubscribe();\r\n    });\r\n\r\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(EuPopupComponent);\r\n    const componentRef = componentFactory.create(new DialogInjector(this.injector, map));\r\n\r\n    this.appRef.attachView(componentRef.hostView);\r\n\r\n    const domElem = (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\r\n    document.body.appendChild(domElem);\r\n\r\n    this.dialogComponentRef = componentRef;\r\n\r\n    this.dialogComponentRef.instance.onClose.subscribe(() => {\r\n      this.removeDialogComponentFromBody();\r\n    });\r\n\r\n    // return the dialogRef\r\n    return dialogRef;\r\n  }\r\n\r\n  private removeDialogComponentFromBody() {\r\n    this.appRef.detachView(this.dialogComponentRef.hostView);\r\n    this.dialogComponentRef.destroy();\r\n  }\r\n\r\n  public close() {\r\n    this.removeDialogComponentFromBody(); \r\n  }\r\n\r\n  public open(config: DialogConfig) {\r\n    const dialogRef = this.appendDialogComponentToBody(config);\r\n    this.dialogComponentRef.instance.childComponentType = EuPopupInnerComponent;\r\n    return dialogRef;\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { EuPopupComponent } from './eu-popup.component';\r\nimport { EuPopupInsertionDirective } from './eu-popup-insertion.directive';\r\nimport { EuPopupInnerComponent } from './poupInner/popupInner.component';\r\nimport { CommonModule } from '@angular/common';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\n\r\n@NgModule({\r\n  declarations: [EuPopupComponent, EuPopupInsertionDirective, EuPopupInnerComponent],\r\n  imports: [CommonModule, BrowserModule],\r\n  exports: [EuPopupComponent, EuPopupInsertionDirective, EuPopupInnerComponent],\r\n  entryComponents: [EuPopupComponent, EuPopupInnerComponent],\r\n})\r\nexport class EuPopupModule {\r\n}\r\n"],"names":["Directive","ViewContainerRef","Subject","Component","ComponentFactoryResolver","ChangeDetectorRef","ViewChild","Injectable","ApplicationRef","Injector","NgModule","CommonModule","BrowserModule"],"mappings":"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"}
